# Patein Form

ระบบนี้เป็นระบบแบบฟอร์มสำหรับกรอกข้อมูลผู้ป่วย พัฒนาด้วยเทคโนโลยีใหม่ ๆ ให้ใช้งานได้ง่ายและทำงานแบบเรียลไทม์ โดยใช้ Next.js ในการทำหน้าเว็บและโครงสร้างหลักของระบบ ส่วนการออกแบบหน้าตาใช้ TailwindCSS

ข้อมูลทั้งหมดจะถูกเก็บและอัปเดตแบบเรียลไทม์ผ่าน Supabase ทำให้ฝั่งผู้ดูแลเห็นข้อมูลที่ผู้ใช้กำลังกรอกอยู่ทันที และตัวระบบก็ถูก Deploy บน Vercel เพื่อให้ใช้งานได้สะดวกและเสถียร

โดยรวมก็คือระบบนี้ช่วยให้ผู้ดูแลเห็นข้อมูลที่ถูกกรอกอยู่สด ๆ ทันทีผ่านหน้าจอ และมี UI ที่ใช้งานง่าย รองรับทุกอุปกรณ์ด้วย Next.js และ TailwindCSS บนแพลตฟอร์ม Vercel ครับ


# Setup Project
## This project use Node version v20.5.0

## Install pnpm if you don't have
npm install -g pnpm

## Install the dependencies
pnpm install

## Copy the .env.example into .env
cp .env.example .env

## Run the database migrations
pnpm run db:push

## Start the app in dev mode
pnpm run dev

# การเข้าใช้งานจะแบ่งเป็นสองส่วน:

ผู้ใช้ทั่วไป: เข้าผ่าน /pateinForm เพื่อกรอกข้อมูลผู้ป่วย

ผู้ดูแลระบบ (Admin): เข้าผ่าน /pateinForm?permission=admin เพื่อติดตามข้อมูลแบบเรียลไทม์

--------------------------Project timeline, milestones, and planning notes.----------------------------------

# 1️ แผนการพัฒนาโครงการ (Project Plan)

เพิ่มการพัฒนาระบบเก็บและจัดการข้อมูลผู้ป่วยแบบออนไลน์ รองรับการเข้าถึงทั้งบนเว็บและมือถือ

สิ่งที่ต้องโฟกัส:

1. วิเคราะห์ความต้องการของผู้ใช้ให้รอบครอบและครอบคลุม เก็บข้อมูลฟิลด์ที่ต้องมีในฟอร์มผู้ป่วย (เช่น ชื่อ, วันเกิด, เพศ, ข้อมูลติดต่อฉุกเฉิน)

2. กำหนดสิทธิ์ผู้ใช้งานของแต่ละผู้ใช้

3. ออกแบบทั้งระบบให้สอดคล้องตามความต้องการ ไม่ว่าจะเป็นออกแบบระบบ ออกแบบ UI/UX สำหรับฟอร์มผู้ป่วย และออกแบบฐานข้อมูล

4. พัฒนาระบบ 

5. ทดสอบระบบ

6. ปรับปรุงและ deploy แก้ไขปัญหาที่เจอจากการทดสอบ

7. จัดทำเอกสารการใช้งาน

# 2️ ไทม์ไลน์ (Timeline)
สัปดาห์ 1	วิเคราะห์ความต้องการและเขียนสเปค
สัปดาห์ 2	ออกแบบฐานข้อมูลและ UI/UX
สัปดาห์ 3-4	พัฒนาฟอร์มผู้ป่วยและ API
สัปดาห์ 5	ทดสอบระบบ (Unit & Integration)
สัปดาห์ 6	User Acceptance Test และแก้ไขปัญหา
สัปดาห์ 7	Deploy และส่งมอบระบบ

# 3️ Milestone (เหตุการณ์สำคัญ)

เหตุการณ์สำคัญของโปรเจคนี้:

Milestone 1 – สเปคเสร็จสมบูรณ์ วิเคราะห์ความต้องการเสร็จ ฟิลด์ผู้ป่วยและสิทธิ์ผู้ใช้งานถูกกำหนดครบ

Milestone 2 – UI/UX และฐานข้อมูลออกแบบเสร็จ

Milestone 3 – ระบบฟอร์มผู้ป่วยใช้งานได้ API สำหรับบันทึกและดึงข้อมูลทำงาน ฟอร์มกรอกข้อมูลผู้ป่วยสามารถบันทึกได้จริง

Milestone 4 – ระบบผ่านการทดสอบ

Milestone 5 – ระบบพร้อมใช้งานจริง Deploy ระบบที่ผู้ใช้สามารถเข้าถึงระบบและบันทึกข้อมูลได้

------------------------------Project Structure----------------------------------------

| โฟลเดอร์/ไฟล์                    | หน้าที่                                                                       |
| -------------------------------- | ----------------------------------------------------------------------------- |
| **app/**                         | เป็นโฟลเดอร์ App Router ของ Next.js, จัดการ route ต่าง ๆ                      |
| **pateinForm/page.tsx**          | Server Component สำหรับหน้า /pateinForm, รับ `searchParams` และ prefetch data |
| **client-page.tsx**              | Client Component ที่ใช้ฟอร์มกรอกข้อมูลผู้ป่วย                                 |
| **lib/trpc/server.ts**           | สร้าง tRPC router สำหรับดึง/บันทึกข้อมูลผู้ป่วย                               |
| **lib/db/schema.ts**             | นิยามตาราง PostgreSQL สำหรับ Supabase (Drizzle ORM)                           |
| **lib/db/client.ts**             | เชื่อมต่อ Supabase client                                                     |
| **components/HydrateClient.tsx** | Wrapper สำหรับใช้ Client Component ใน Server Component                        |
| **types/index.ts**               | เก็บ TypeScript types ของผู้ป่วย เช่น `Patient`, `Permission`                 |
| **.env.local**                   | เก็บ Supabase URL และ Key                                                     |
| **globals.css**                  | CSS ทั่วไปของเว็บ                                                             |

------------------------------------------------Design-------------------------------------------------------------------
การจัดทำในรูปแบบที่ใช้งานได้หลากหลายรูปแบบ ไม่ว่าจะเป็น Dekstop Teblet Mobile จะใช้ Tailwind CSS ในการช่วยจัดการแบ่งคอลัมพ์ ตามขนาดหน้าจอที่ใช้งาน

---------------------------------Real-time Synchronization Flow-----------------------------------------------------------
เมื่อมีการกรอกหรือแก้ไขข้อมูลในฟอร์มของผู้ป่วย ข้อมูลจะ sync แบบเรียลไทม์ ระหว่าง Client → Server → Other Clients

ป้องกันข้อมูลสูญหายและให้ทุกหน้าจอเห็นข้อมูลล่าสุดทันที

เทคโนโลยีที่ใช้:

Client: Next.js 

Server: Supabase Realtime 

Database: PostgreSQL (Supabase)